{# Allows the DOCTYPE to be set on a page by page basis #}
{%- block doctype -%}<!DOCTYPE html>{%- endblock -%}

{# Allows custom attributes to be added to the <html> tag #}
{%- block htmltag -%}
{% set lang = h.lang() %}
<!--[if IE 9]> <html lang="{{ lang }}" class="ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html lang="{{ lang }}" {% if h.is_rtl_language() %}dir="rtl"{% endif %}> <!--<![endif]-->
{%- endblock -%}

<head{% block headtag %}{% endblock %}>
    {# Add custom meta tags to the page. Call super() to get the default tags
    such as charset, viewport and generator.

    Example:

    {% block meta %}
        {{ super() }}
        <meta name="description" value="My website description" />
    {% endblock %}
    #}
    {%- block meta -%}
        <meta charset="utf-8" />
        <meta name="csrf_field_name" content="{{ g.csrf_field_name }}" />
        <meta name="{{ g.csrf_field_name }}" content="{{ csrf_token() }}" />
        {% block meta_generator %}<meta name="generator" content="ckan {{ h.ckan_version() }}" />{% endblock %}
        {% block meta_viewport %}<meta name="viewport" content="width=device-width, initial-scale=1.0" />{% endblock %}
    {%- endblock -%}

    <title>
        {%- block title -%}
            {%- block subtitle -%}{%- endblock -%}
            {%- if self.subtitle()|trim %} {{ g.template_title_delimiter }} {% endif -%}
            {{ g.site_title }}
        {%- endblock -%}
    </title>

    {% block links -%}
        <link rel="shortcut icon" href="{{ g.favicon }}" />
    {% endblock -%}

    {%- block styles -%}
        {# TODO: store just name of asset instead of path to it #}
        {% set theme = h.get_rtl_theme() if h.is_rtl_language() else g.theme %}
        {% asset theme %}
    {%- endblock -%}

    {{ h.render_assets("style") }}
    {%- block custom_styles -%}
        {%- if g.site_custom_css -%}
            <style>
                {{ g.site_custom_css | safe }}
            </style>
        {%- endif -%}
    {%- endblock -%}

    {%- block head_extras -%}{%- endblock -%}
</head>

<body{% block bodytag %} data-site-root="{{ h.url_for('home.index', locale='default', qualified=true) }}" data-locale-root="{{ h.url_for('home.index', qualified=true) }}"{% endblock %}>
    {%- block page -%}{%- endblock -%}

    {%- block scripts -%}{%- endblock -%}

    {%- block body_extras -%}{%- endblock -%}

    {{ h.render_assets("style") }}
    {{ h.render_assets("script") }}
</body>
</html>
